"""
The main, core program. A CLI program.

For now: whilst this is just a CLI program, you must edit any key settings with the file:
        C:\Potts' Software\Fortnite Exploit\fe-sett.ini
Changing this file is permitted, I'm not the best at efficient programming. Work away.

Written by Elliot Potts,
https://www.elliotpotts.me/
"""

import os
import time
import keyboard
import ConfigParser


local_settings = {
    'hotkey': None,
    'audio_mute': None
}


cPar = ConfigParser.SafeConfigParser()


def settingsDigest():
    if os.path.isdir("C:\Potts' Software\Fortnite Exploit"):
        pass
    else:
        os.makedirs("C:\Potts' Software\Fortnite Exploit")

    os.chdir("C:\Potts' Software\Fortnite Exploit")

    if os.path.isfile("fe-sett.ini"):
        settRead = cPar.read("fe-sett.ini")
        local_settings['hotkey'] = cPar.get("settings", "Hotkey")
        local_settings['audio_mute'] = cPar.get("settings", "Voice")
    else:
        cfgFile = open("fe-sett.ini", "w")
        cPar.add_section("settings")
        cPar.set("settings", "Hotkey", "The key you want to use")
        cPar.set("settings", "Voice", "False")
        cPar.write(cfgFile)
        cfgFile.close()
        settRead = cPar.read("fe-sett.ini")
        local_settings['hotkey'] = cPar.get("settings", "Hotkey")
        local_settings['audio_mute'] = cPar.get("settings", "Voice")


settingsDigest()


def suspendAudio(state):
    pass


def main():
    print(local_settings['audio_mute'])
    print(local_settings['hotkey'])


if __name__ == '__main__':
    try:
        main()
    except KeyboardInterrupt:
        print(" [-] The program has been manually terminated via the keyboard...")
